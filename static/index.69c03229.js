import{Q as a,a as e,M as t,k as l,m as o,N as s,S as n,b as r,e as d,w as u,r as i,o as c,I as p,f as b,y as m,E as f,a0 as y,X as v}from"./index.c6c04119.js";import{g as h}from"./getQuery.b59b1282.js";const w=m(" 批量下载 "),g=e({__name:"index",setup(e){const{auditFlowId:m=1}=h(),g=async()=>{const{result:e}=await function(e){return a({url:"/api/services/app/AnalyseBoard/GetDownloadList",method:"get",data:e})}(m);D.tableData=e||[]},_=t(!1),D=l({tableData:[]}),j=t([]);o((()=>{})),s((()=>{g()})),n((()=>{}));const x=a=>{j.value=a},N=async()=>{const e=j.value.map((a=>a.downloadListSaveId))||[];if(!e.length)return f.warning("请选择不少于一项归档项！");try{_.value=!0;let t=await function(e){return a({url:"/api/services/app/AnalyseBoard/PostPigeonholeDownload",method:"post",data:e,responseType:"blob"})}(e);y(t,"归档"),_.value=!1}catch{_.value=!1}};return(a,e)=>{const t=i("el-table-column"),l=i("el-table"),o=i("el-button"),s=i("el-row"),n=i("el-card"),m=v("loading");return c(),r("div",null,[d(n,{header:"归档"},{default:u((()=>[d(l,{data:D.tableData,height:"75vh",onSelectionChange:x},{default:u((()=>[d(t,{type:"selection",width:"55"}),d(t,{type:"index",label:"序号"}),d(t,{prop:"fileName",label:"归档文件名称"}),d(t,{prop:"productName",label:"零件名称"}),d(t,{prop:"quoteProjectName",label:"核报价项目名称"})])),_:1},8,["data"]),d(s,{m:"2",justify:"end"},{default:u((()=>[p((c(),b(o,{type:"primary",onClick:N},{default:u((()=>[w])),_:1})),[[m,_.value,void 0,{fullscreen:!0,lock:!0}]])])),_:1})])),_:1})])}}});export{g as default};
