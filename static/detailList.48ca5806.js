import{_ as e,a,k as l,m as t,N as i,S as o,W as d,b as r,i as s,e as n,w as m,u,r as c,o as p,y,E as f,Z as b}from"./index.9c83b174.js";import{c as g,f as _,h as k,i as V}from"./dictionary.3c79f5dd.js";const h={class:"dictionary"},F={class:"dictionary__btn-container"},N=y("搜索"),C={class:"dictionary__btn-container"},w=y("创建字典明细"),x=y("编辑"),v=y("删除"),z={class:"dictionary__btn-container"},D={class:"dialog-footer"},U=y("取消"),E=y("保存");var I=e(a({__name:"detailList",setup(e,{expose:a}){const y=u(),I=l({tableData:[],dialogVisible:!1,isEdit:!1,formLabelWidth:"140px",searchForm:{displayName:"",remark:""},editForm:{id:"",displayName:"",remark:""},pageNo:1,pageSize:20,total:0}),L=()=>{S()},S=async()=>{let e={displayName:"",remark:"",maxResultCount:20,skipCount:0,financeDictionaryId:""};e.displayName=I.searchForm.displayName,e.remark=I.searchForm.remark,e.skipCount=(I.pageNo-1)*I.pageSize,e.maxResultCount=I.pageSize,e.financeDictionaryId=y.query.id+"";let a=await g(e);I.tableData=a.result.items,I.total=a.result.totalCount},W=()=>{S()},j=async()=>{let e=null;if(I.isEdit)e=await _(I.editForm);else{let a=Object.assign({financeDictionaryId:y.query.id+""},I.editForm);e=await k(a)}e.success&&(f({type:"success",message:"保存成功"}),I.dialogVisible=!1,S())},P=()=>{I.editForm={id:"",displayName:"",remark:""},I.isEdit=!1};return t((()=>{})),i((()=>{L()})),o((()=>{})),a({...d(I)}),(e,a)=>{const l=c("el-input"),t=c("el-form-item"),i=c("el-button"),o=c("el-form"),d=c("el-table-column"),u=c("el-table"),y=c("el-pagination"),g=c("el-dialog");return p(),r("div",h,[s("div",F,[n(o,{model:I.searchForm,inline:""},{default:m((()=>[n(t,{label:"字典名"},{default:m((()=>[n(l,{modelValue:I.searchForm.displayName,"onUpdate:modelValue":a[0]||(a[0]=e=>I.searchForm.displayName=e)},null,8,["modelValue"])])),_:1}),n(t,{label:"备注"},{default:m((()=>[n(l,{modelValue:I.searchForm.remark,"onUpdate:modelValue":a[1]||(a[1]=e=>I.searchForm.remark=e)},null,8,["modelValue"])])),_:1}),n(t,null,{default:m((()=>[n(i,{type:"primary",onClick:L},{default:m((()=>[N])),_:1})])),_:1})])),_:1},8,["model"])]),s("div",C,[n(i,{type:"primary",onClick:a[2]||(a[2]=e=>I.dialogVisible=!0)},{default:m((()=>[w])),_:1})]),n(u,{data:I.tableData,style:{width:"100%"}},{default:m((()=>[n(d,{label:"字典明细名",prop:"displayName"}),n(d,{label:"备注",prop:"remark"}),n(d,{label:"操作"},{default:m((e=>[n(i,{size:"small",onClick:a=>{return e.$index,l=e.row,I.isEdit=!0,I.editForm=l,void(I.dialogVisible=!0);var l}},{default:m((()=>[x])),_:2},1032,["onClick"]),n(i,{size:"small",type:"danger",onClick:a=>{return e.$index,l=e.row,void b.confirm("确定删除该字典?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{"200"===(await V(l.id)).code&&f({type:"success",message:"删除成功"})})).catch((()=>{f({type:"info",message:"取消成功"})}));var l}},{default:m((()=>[v])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),s("div",z,[n(y,{background:"",layout:"prev, pager, next",total:I.total,"page-size":20,currentPage:I.pageNo,"onUpdate:currentPage":[a[3]||(a[3]=e=>I.pageNo=e),W]},null,8,["total","currentPage"])]),n(g,{modelValue:I.dialogVisible,"onUpdate:modelValue":a[7]||(a[7]=e=>I.dialogVisible=e),title:"字典明细编辑",onClose:P},{footer:m((()=>[s("span",D,[n(i,{onClick:a[6]||(a[6]=e=>I.dialogVisible=!1)},{default:m((()=>[U])),_:1}),n(i,{type:"primary",onClick:j},{default:m((()=>[E])),_:1})])])),default:m((()=>[n(o,{model:I.editForm},{default:m((()=>[n(t,{label:"字典明细名","label-width":I.formLabelWidth},{default:m((()=>[n(l,{modelValue:I.editForm.displayName,"onUpdate:modelValue":a[4]||(a[4]=e=>I.editForm.displayName=e)},null,8,["modelValue"])])),_:1},8,["label-width"]),n(t,{label:"备注","label-width":I.formLabelWidth},{default:m((()=>[n(l,{modelValue:I.editForm.remark,"onUpdate:modelValue":a[5]||(a[5]=e=>I.editForm.remark=e),type:"textarea"},null,8,["modelValue"])])),_:1},8,["label-width"])])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-545f8c00"]]);export{I as default};
