import{Q as e,a as l,k as a,m as t,N as o,l as d,S as n,W as i,b as u,e as r,w as s,i as p,I as m,f as c,E as h,r as b,o as f,t as w,y as V,X as g}from"./index.91226b5a.js";import{g as _}from"./getQuery.336943ac.js";const U={key:0},y={key:1},x={key:0},v={key:1},C={style:{float:"right",margin:"20px 10px"}},E=V("提交"),q=l({__name:"index",setup(l,{expose:V}){let{auditFlowId:q,productId:D}=_();const L=a({years:[],smt:[],cob:[]});t((()=>{})),o((async()=>{let l=await function(l){return e({url:"/api/services/app/PriceEvaluation/GetInputManufacturingCost",method:"get",data:l})}({auditFlowId:q,modelCountId:D});if(l.result)L.smt=l.result.smt,L.cob=l.result.cob;else{let{result:l}=await function(l){return e({url:"/api/services/app/ProductionControl/GetAllYearsFrom",method:"get",data:{auditFlowId:l}})}(q);L.years=l,L.years.forEach((e=>{L.smt.push({year:e}),L.cob.push({year:e})})),L.smt.push({year:0}),L.cob.push({year:0})}})),d((()=>L.smt),(e=>{e.forEach((e=>{e.subtotal1=e.directLabor1+e.equipmentDepreciation1+e.lineChangeCost1+e.manufacturingExpenses1,e.subtotal2=e.directLabor2+e.equipmentDepreciation2+e.manufacturingExpenses2,e.subtotal=e.subtotal1+e.subtotal2}))}),{deep:!0}),d((()=>L.cob),(e=>{e.forEach((e=>{e.subtotal1=e.directLabor1+e.equipmentDepreciation1+e.lineChangeCost1+e.manufacturingExpenses1,e.subtotal2=e.directLabor2+e.equipmentDepreciation2+e.manufacturingExpenses2,e.subtotal=e.subtotal1+e.subtotal2}))}),{deep:!0});const I=async()=>{let{smt:l,cob:a}=L,t=await function(l){return e({url:"/api/services/app/PriceEvaluation/ManufacturingCostInput",method:"post",data:l})}({auditFlowId:q,modelCountId:D,smt:l,cob:a});t.success&&h.success("提交成功")};return n((()=>{})),V({...i(L)}),(e,l)=>{const a=b("el-table-column"),t=b("el-input-number"),o=b("el-table"),d=b("el-button"),n=g("havedone");return f(),u("div",null,[r(o,{data:L.smt,border:"",style:{margin:"20px 0"},height:"500"},{default:s((()=>[r(a,{prop:"year",label:"年份",width:"180"},{default:s((({row:e})=>[e.year?(f(),u("div",U,w(e.year),1)):(f(),u("div",y,"全生命周期"))])),_:1}),r(a,{label:"直接制造成本",width:"180"},{default:s((()=>[r(a,{label:"直接人工",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.directLabor1,"onUpdate:modelValue":l=>e.directLabor1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"设备折旧",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.equipmentDepreciation1,"onUpdate:modelValue":l=>e.equipmentDepreciation1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"换线成本",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.lineChangeCost1,"onUpdate:modelValue":l=>e.lineChangeCost1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"制造费用",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.manufacturingExpenses1,"onUpdate:modelValue":l=>e.manufacturingExpenses1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"小计",width:"180",prop:"cost"},{default:s((({row:e})=>[p("div",null,w(e.subtotal1),1)])),_:1})])),_:1}),r(a,{label:"间接制造成本",width:"180"},{default:s((()=>[r(a,{label:"直接人工",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.directLabor2,"onUpdate:modelValue":l=>e.directLabor2=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"设备折旧",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.equipmentDepreciation2,"onUpdate:modelValue":l=>e.equipmentDepreciation2=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"制造费用",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.manufacturingExpenses2,"onUpdate:modelValue":l=>e.manufacturingExpenses2=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"小计",width:"180",prop:"cost"},{default:s((({row:e})=>[p("div",null,w(e.subtotal2),1)])),_:1})])),_:1}),r(a,{label:"合计",width:"180",prop:"cost",fixed:"right"},{default:s((({row:e})=>[p("div",null,w(e.subtotal),1)])),_:1})])),_:1},8,["data"]),r(o,{data:L.cob,border:"",style:{margin:"20px 0"},height:"500"},{default:s((()=>[r(a,{prop:"year",label:"年份",width:"180"},{default:s((({row:e})=>[e.year?(f(),u("div",x,w(e.year),1)):(f(),u("div",v,"全生命周期"))])),_:1}),r(a,{label:"直接制造成本",width:"180"},{default:s((()=>[r(a,{label:"直接人工",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.directLabor1,"onUpdate:modelValue":l=>e.directLabor1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"设备折旧",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.equipmentDepreciation1,"onUpdate:modelValue":l=>e.equipmentDepreciation1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"换线成本",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.lineChangeCost1,"onUpdate:modelValue":l=>e.lineChangeCost1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"制造费用",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.manufacturingExpenses1,"onUpdate:modelValue":l=>e.manufacturingExpenses1=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"小计",width:"180",prop:"cost"},{default:s((({row:e})=>[p("div",null,w(e.subtotal1),1)])),_:1})])),_:1}),r(a,{label:"间接制造成本",width:"180"},{default:s((()=>[r(a,{label:"直接人工",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.directLabor2,"onUpdate:modelValue":l=>e.directLabor2=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"设备折旧",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.equipmentDepreciation2,"onUpdate:modelValue":l=>e.equipmentDepreciation2=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"制造费用",width:"180"},{default:s((({row:e})=>[r(t,{"controls-position":"right",min:0,modelValue:e.manufacturingExpenses2,"onUpdate:modelValue":l=>e.manufacturingExpenses2=l,placeholder:""},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),r(a,{label:"小计",width:"180",prop:"cost"},{default:s((({row:e})=>[p("div",null,w(e.subtotal2),1)])),_:1})])),_:1}),r(a,{label:"合计",width:"180",prop:"cost",fixed:"right"},{default:s((({row:e})=>[p("div",null,w(e.subtotal),1)])),_:1})])),_:1},8,["data"]),p("div",C,[m((f(),c(d,{onClick:I,type:"primary"},{default:s((()=>[E])),_:1})),[[n]])])])}}});export{q as default};
