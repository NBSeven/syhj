import{a as e}from"./nreQCDepartmentSummaries.660b71b7.js";import{i as a,j as t}from"./request.578b9ba3.js";import{g as l}from"./getQuery.b59b1282.js";import{_ as o,a as d,k as u,m as s,N as n,S as r,b as i,e as m,w as c,r as p,o as f,I as b,f as w,g as q,y as h,t as V,i as _,E as y,X as g}from"./index.c6c04119.js";const k={style:{padding:"0 10px"}},D=h(" 项目制程QC量检具 "),U=h("新增"),v=h("删除"),C={style:{float:"right",margin:"20px 0"}},x=h("提交");var j=o(d({__name:"nreQCDepartment",setup(o){const{auditFlowId:d,productId:j}=l(),I=u({qaqcDepartments:[]}),P=()=>{I.qaqcDepartments.push({cost:0,count:0,qc:null,remark:"",unitPrice:"",useWorkstation:null})},Q=async()=>{const{success:e}=await t({auditFlowId:d,qcGaugeDtoModels:{productId:j,qaqcDepartments:I.qaqcDepartments.map((e=>({...e,allCost:(e.unitPrice||0)*(e.count||0)})))}});e&&y.success("提交成功")};return s((()=>{})),n((()=>{(async()=>{const{result:e}=await a(d,j);I.qaqcDepartments=(null==e?void 0:e.qaqcDepartments)||[]})()})),r((()=>{})),(a,t)=>{const l=p("el-button"),o=p("el-row"),d=p("el-table-column"),u=p("el-input"),s=p("el-input-number"),n=p("el-table"),r=p("el-card"),y=g("havedone");return f(),i("div",k,[m(r,{class:"margin-top"},{header:c((()=>[m(o,{style:{width:"100%"},justify:"space-between",align:"middle"},{default:c((()=>[D,b((f(),w(l,{type:"primary",onClick:P},{default:c((()=>[U])),_:1})),[[y]])])),_:1})])),default:c((()=>[m(n,{data:I.qaqcDepartments,border:"","summary-method":q(e),"show-summary":"",height:"72vh"},{default:c((()=>[m(d,{type:"index",width:"50"}),m(d,{label:"项目制程QC量检具",width:"180"},{default:c((({row:e})=>[m(u,{modelValue:e.qc,"onUpdate:modelValue":a=>e.qc=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(d,{label:"单价",width:"180"},{default:c((({row:e})=>[m(u,{modelValue:e.unitPrice,"onUpdate:modelValue":a=>e.unitPrice=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(d,{label:"数量（set）",width:"220"},{default:c((({row:e})=>[m(s,{modelValue:e.count,"onUpdate:modelValue":a=>e.count=a,min:0,"controls-position":"right"},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(d,{label:"费用",width:"180"},{default:c((({row:e})=>[h(V(e.unitPrice*e.count),1)])),_:1}),m(d,{label:"使用工站",width:"180"},{default:c((({row:e})=>[m(u,{modelValue:e.useWorkstation,"onUpdate:modelValue":a=>e.useWorkstation=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(d,{label:"备注",width:"180"},{default:c((({row:e})=>[m(u,{modelValue:e.remark,"onUpdate:modelValue":a=>e.remark=a},null,8,["modelValue","onUpdate:modelValue"])])),_:1}),m(d,{label:"操作",fixed:"right"},{default:c((({$index:e})=>[b((f(),w(l,{onClick:a=>{return t=e,void I.qaqcDepartments.splice(t,1);var t},type:"danger"},{default:c((()=>[v])),_:2},1032,["onClick"])),[[y]])])),_:1})])),_:1},8,["data","summary-method"]),_("div",C,[b((f(),w(l,{type:"primary",onClick:Q},{default:c((()=>[x])),_:1})),[[y]])])])),_:1})])}}}),[["__scopeId","data-v-878bfb08"]]);export{j as default};
