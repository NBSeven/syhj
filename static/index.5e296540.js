import{a as e,g as l,b as a,c as t,d as o}from"./bom.1dacf86d.js";import{g as i}from"./getQuery.b88fabca.js";import{_ as s}from"./index.1a9e945e.js";import{a as r,h as d}from"./upload.b7b7a52e.js";import{_ as n,a as u,k as c,N as m,b as p,e as g,i as b,w as h,r as f,o as _,g as F,z as V,A as P,y as w,E as y}from"./index.233133c1.js";import"./service.1ad4260d.js";const k=e=>(V("data-v-86c01b12"),e=e(),P(),e),x={class:"electronic-import"},v={class:"electronic-import__btn-container"},U=w("结构料上传"),I=w("结构料模版下载"),D=w("附件上传：3D爆炸图"),N=k((()=>b("h5",null,"结构料导入",-1))),B=k((()=>b("div",null,"物流基础信息",-1))),L=k((()=>b("h6",null,"外包装体积",-1))),j=w("cm"),H=w("cm"),W=w("cm"),S=k((()=>b("h6",null,"重量",-1))),C=w("kg"),Q=w("pcs"),R=k((()=>b("h5",null,"包装基础信息",-1))),E=k((()=>b("h6",null,"内包装体积",-1))),q=w("mm"),A=w("mm"),M=w("mm"),O=w(" 箱/托"),z=w(" PCS/箱"),T={style:{float:"right",margin:"20px 0"}},G=w("提交");var J=n(u({__name:"index",setup(n){let u=null,V=null;const P=c({tableData:[],setVisible:!1,logisticsForm:{outerPackagingLength:"",outerPackagingWidth:"",outerPackagingHeight:"",singleProductWeight:"",singleBoxQuantity:"",innerPackagingLength:"",innerPackagingWidth:"",innerPackagingHeight:"",isHit:"",boxesPerPallet:"",quantityPerBox:"",remarks:"",picture3DFileId:""}});m((async()=>{let a=i();if(u=Number(a.auditFlowId)||0,V=Number(a.productId)||0,u&&V){let a=await e({auditFlowId:u,productId:V});P.tableData=a.result;let t=await l({auditFlowId:u,productId:V});Object.keys(P.logisticsForm).forEach((e=>{P.logisticsForm[e]=t.result[e]}))}}));const w=e=>{e.success&&(!1===e.result.isSuccess?y({message:e.result.message,type:"error"}):P.tableData=e.result.structureBomDtos)},k=e=>{e.success&&(P.logisticsForm.picture3DFileId=e.result.fileId,y({message:"上传成功",type:"success"}))},J=async()=>{const e=await a(),l=new FileReader;l.readAsDataURL(e),l.onload=function(){let l=URL.createObjectURL(new Blob([e])),a=document.createElement("a");document.body.appendChild(a),a.href=l,a.download="模板文件.xlsx",a.target="_blank",a.click(),a.remove()}},K=async()=>{let e=Object.assign({auditFlowId:u,productId:V,structureBomDtos:P.tableData},P.logisticsForm),l=await t(e),a=await o(e);l.success&&a.success&&y({message:"保存成功",type:"success"})};return(e,l)=>{const a=f("el-button"),t=f("el-upload"),o=f("el-form-item"),i=f("el-form"),n=f("el-table-column"),u=f("el-table"),c=f("el-input"),m=f("el-option"),V=f("el-select"),y=f("el-card");return _(),p("div",x,[g(s),b("div",v,[g(i,{inline:!0},{default:h((()=>[g(o,{label:""},{default:h((()=>[g(t,{action:"/api/services/app/StructionBom/LoadExcel","on-success":w,"show-file-list":!1,"on-progress":F(r),"on-error":F(d)},{default:h((()=>[g(a,{type:"primary"},{default:h((()=>[U])),_:1})])),_:1},8,["on-progress","on-error"])])),_:1}),g(o,{label:""},{default:h((()=>[g(a,{type:"primary",onClick:J},{default:h((()=>[I])),_:1})])),_:1}),g(o,{label:""},{default:h((()=>[g(t,{action:"/api/services/app/FileCommonService/UploadFile","on-success":k,"show-file-list":!1},{default:h((()=>[g(a,{type:"primary"},{default:h((()=>[D])),_:1})])),_:1})])),_:1})])),_:1})]),N,g(u,{data:P.tableData,border:"",style:{width:"100%"},height:"700"},{default:h((()=>[g(n,{prop:"categoryName",label:"物料大类",width:"180"}),g(n,{prop:"typeName",label:"物料种类",width:"180"}),g(n,{prop:"isInvolveItem",label:"是否涉及",width:"180"}),g(n,{prop:"drawingNumName",label:"图号名称",width:"180"}),g(n,{prop:"sapItemNum",label:"物料编号",width:"180"}),g(n,{prop:"overallDimensionSize",label:"外形尺寸mm",width:"180"}),g(n,{prop:"materialName",label:"材料名称",width:"180"}),g(n,{prop:"weightNumber",label:"重量",width:"180"}),g(n,{prop:"moldingProcess",label:"成型工艺",width:"180"}),g(n,{prop:"isNewMouldProduct",label:"是否新开模",width:"180"}),g(n,{prop:"secondaryProcessingMethod",label:"二次加工方法",width:"180"}),g(n,{prop:"surfaceTreatmentMethod",label:"表面处理",width:"180"}),g(n,{prop:"assemblyQuantity",label:"装配数量",width:"180"}),g(n,{prop:"dimensionalAccuracyRemark",label:"关键尺寸精度及重要要求",width:"200"})])),_:1},8,["data"]),g(y,null,{header:h((()=>[B])),default:h((()=>[g(i,{model:P.logisticsForm,inline:""},{default:h((()=>[L,g(o,{label:"外包装长"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.outerPackagingLength,"onUpdate:modelValue":l[0]||(l[0]=e=>P.logisticsForm.outerPackagingLength=e)},{append:h((()=>[j])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"外包装宽"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.outerPackagingWidth,"onUpdate:modelValue":l[1]||(l[1]=e=>P.logisticsForm.outerPackagingWidth=e)},{append:h((()=>[H])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"外包装高"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.outerPackagingHeight,"onUpdate:modelValue":l[2]||(l[2]=e=>P.logisticsForm.outerPackagingHeight=e)},{append:h((()=>[W])),_:1},8,["modelValue"])])),_:1}),S,g(o,{label:"单个产品重量"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.singleProductWeight,"onUpdate:modelValue":l[3]||(l[3]=e=>P.logisticsForm.singleProductWeight=e)},{append:h((()=>[C])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"单箱数量"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.singleBoxQuantity,"onUpdate:modelValue":l[4]||(l[4]=e=>P.logisticsForm.singleBoxQuantity=e)},{append:h((()=>[Q])),_:1},8,["modelValue"])])),_:1}),R,E,g(o,{label:"内包装长"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.innerPackagingLength,"onUpdate:modelValue":l[5]||(l[5]=e=>P.logisticsForm.innerPackagingLength=e)},{append:h((()=>[q])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"内包装宽"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.innerPackagingWidth,"onUpdate:modelValue":l[6]||(l[6]=e=>P.logisticsForm.innerPackagingWidth=e)},{append:h((()=>[A])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"内包装高"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.innerPackagingHeight,"onUpdate:modelValue":l[7]||(l[7]=e=>P.logisticsForm.innerPackagingHeight=e)},{append:h((()=>[M])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"是否打托"},{default:h((()=>[g(V,{modelValue:P.logisticsForm.isHit,"onUpdate:modelValue":l[8]||(l[8]=e=>P.logisticsForm.isHit=e),placeholder:"Select"},{default:h((()=>[g(m,{label:"是",value:"1"}),g(m,{label:"否",value:"0"})])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"每托盘箱数"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.boxesPerPallet,"onUpdate:modelValue":l[9]||(l[9]=e=>P.logisticsForm.boxesPerPallet=e)},{append:h((()=>[O])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"单箱包装数量"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.quantityPerBox,"onUpdate:modelValue":l[10]||(l[10]=e=>P.logisticsForm.quantityPerBox=e)},{append:h((()=>[z])),_:1},8,["modelValue"])])),_:1}),g(o,{label:"备注"},{default:h((()=>[g(c,{modelValue:P.logisticsForm.remarks,"onUpdate:modelValue":l[11]||(l[11]=e=>P.logisticsForm.remarks=e),type:"textarea"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"]),b("div",T,[g(a,{type:"primary",onClick:K},{default:h((()=>[G])),_:1})])])),_:1})])}}}),[["__scopeId","data-v-86c01b12"]]);export{J as default};
