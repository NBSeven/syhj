import{a as e,d as a,b as l}from"./service.e7f45126.js";import{_ as t,a as n,k as o,m as i,N as d,S as s,W as u,b as r,i as c,e as m,w as p,r as g,o as x,F as h,n as f,t as V,f as b,g as _,y as R,Z as y,E as v}from"./index.ca893667.js";import{p as C,m as k}from"./plus.6326ffd5.js";import"./plugin-vue_export-helper.c1230001.js";const F={class:"exchangeRate"},K={class:"exchangeRate__btn-container"},w=R("搜索"),U={class:"exchangeRate__btn-container"},z=R("新增汇率"),N=R(),j=R("编辑"),D=R("删除"),E={class:"exchangeRate__btn-container"},S={class:"dialog-footer"},P=R("取消"),B=R("保存");var T=t(n({__name:"exchangeRate",setup(t,{expose:n}){let R=(new Date).getFullYear();const T=o({searchForm:{exchangeRateKind:"",maxResultCount:20,skipCount:0},isEdit:!1,editForm:{exchangeRateKind:"",exchangeRateValue:[{year:R,value:""}]},dialogVisible:!1,tableData:[],pageNo:1,pageSize:20,total:0}),Y=()=>{R++,T.editForm.exchangeRateValue.push({year:R,value:""})},$=async()=>{let a={exchangeRateKind:"",maxResultCount:20,skipCount:0};a.exchangeRateKind=T.searchForm.exchangeRateKind,a.skipCount=(T.pageNo-1)*T.pageSize,a.maxResultCount=T.pageSize;let l=await e(a);T.tableData=l.result.items,T.total=l.result.totalCount},I=()=>{},W=()=>{$()},Z=()=>{T.isEdit=!1,T.editForm={exchangeRateKind:"",exchangeRateValue:[{year:"",value:""}]}},q=async()=>{let e=null;e=await l(T.editForm),e.success&&(v({type:"success",message:"保存成功"}),T.dialogVisible=!1,$())};return i((()=>{})),d((()=>{W()})),s((()=>{})),n({...u(T)}),(e,l)=>{const t=g("el-input"),n=g("el-form-item"),o=g("el-button"),i=g("el-form"),d=g("el-table-column"),s=g("el-table"),u=g("el-pagination"),R=g("el-button-group"),A=g("el-dialog");return x(),r("div",null,[c("div",F,[c("div",K,[m(i,{model:T.searchForm,inline:""},{default:p((()=>[m(n,{label:"货币币种"},{default:p((()=>[m(t,{modelValue:T.searchForm.exchangeRateKind,"onUpdate:modelValue":l[0]||(l[0]=e=>T.searchForm.exchangeRateKind=e)},null,8,["modelValue"])])),_:1}),m(n,null,{default:p((()=>[m(o,{type:"primary",onClick:W},{default:p((()=>[w])),_:1})])),_:1})])),_:1},8,["model"])]),c("div",U,[m(o,{type:"primary",onClick:l[1]||(l[1]=e=>T.dialogVisible=!0)},{default:p((()=>[z])),_:1})]),m(s,{data:T.tableData},{default:p((()=>[m(d,{label:"货币币种",prop:"exchangeRateKind"}),m(d,{label:"汇率"},{default:p((e=>[(x(!0),r(h,null,f(e.row.exchangeRateValue,((e,a)=>(x(),r("div",{key:a},[c("span",null,V(e.year)+":",1),N,c("span",null,V(e.value),1)])))),128))])),_:1}),m(d,{label:"操作"},{default:p((e=>[m(o,{size:"small",onClick:a=>{return e.$index,l=e.row,T.isEdit=!0,T.editForm=l,void(T.dialogVisible=!0);var l}},{default:p((()=>[j])),_:2},1032,["onClick"]),m(o,{size:"small",type:"danger",onClick:l=>{return e.$index,t=e.row,void y.confirm("确定删除该汇率?","警告",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{(await a(t.id)).success&&(v({type:"success",message:"删除成功"}),$())}));var t}},{default:p((()=>[D])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data"]),c("div",E,[m(u,{background:"",layout:"prev, pager, next",total:T.total,"page-size":20,currentPage:T.pageNo,"onUpdate:currentPage":[l[2]||(l[2]=e=>T.pageNo=e),I]},null,8,["total","currentPage"])]),m(A,{modelValue:T.dialogVisible,"onUpdate:modelValue":l[5]||(l[5]=e=>T.dialogVisible=e),title:"编辑汇率",onClose:Z},{footer:p((()=>[c("span",S,[m(o,{onClick:l[4]||(l[4]=e=>T.dialogVisible=!1)},{default:p((()=>[P])),_:1}),m(o,{type:"primary",onClick:q},{default:p((()=>[B])),_:1})])])),default:p((()=>[m(i,{model:T.editForm},{default:p((()=>[m(n,{label:"货币种类(比如 CNY)"},{default:p((()=>[m(t,{modelValue:T.editForm.exchangeRateKind,"onUpdate:modelValue":l[3]||(l[3]=e=>T.editForm.exchangeRateKind=e)},null,8,["modelValue"])])),_:1}),m(n,{label:"汇率值"},{default:p((()=>[(x(!0),r(h,null,f(T.editForm.exchangeRateValue,((e,a)=>(x(),b(t,{modelValue:e.value,"onUpdate:modelValue":a=>e.value=a,placeholder:"请输入汇率",key:a,style:{"margin-bottom":"20px"}},{prepend:p((()=>[m(t,{modelValue:e.year,"onUpdate:modelValue":a=>e.year=a,placeholder:"请输入年份"},null,8,["modelValue","onUpdate:modelValue"])])),append:p((()=>[m(R,null,{default:p((()=>[m(o,{icon:_(C),onClick:Y},null,8,["icon"]),m(o,{icon:_(k),onClick:e=>(e=>{T.editForm.exchangeRateValue.splice(e,1)})(a),disabled:1===T.editForm.exchangeRateValue.length},null,8,["icon","onClick","disabled"])])),_:2},1024)])),_:2},1032,["modelValue","onUpdate:modelValue"])))),128))])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])])}}}),[["__scopeId","data-v-0334b3f6"]]);export{T as default};
